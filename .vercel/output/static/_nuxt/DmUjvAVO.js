import{h as c,K as j,k as G,l as Y,c as o,a as s,i as T,e as D,n as v,p as S,q as ss,v as O,F as u,f as r,d as p,t as i,y as ts,o as n,z as $,L as es}from"./uS3GKcKi.js";import{_ as as}from"./DlAUqK2U.js";const ls={class:"room-map-page"},os={class:"controls-container"},ns={class:"search-filter"},is={class:"search-box"},ds={class:"filter-dropdown"},vs=["value"],cs={class:"filter-dropdown"},us={class:"view-controls"},rs={class:"view-toggle"},ps={class:"legend-container"},hs={class:"legend-items"},gs={class:"legend-count"},ms={class:"legend-count"},_s={class:"legend-count"},ys={class:"legend-count"},fs={class:"map-content"},ks={key:0,class:"grid-view"},ws={class:"floor-header"},zs={class:"floor-info"},xs={class:"floor-title"},Cs={class:"room-count"},bs=["onClick"],Ls=["onClick"],Ms={class:"room-header"},Vs={class:"room-number"},Ps={class:"room-info"},Bs={class:"room-type"},Ts={class:"room-price"},Ss={class:"room-features"},$s={key:0,class:"more-features"},Hs={key:1,class:"map-view"},Rs={class:"interactive-map",ref:"mapContainer"},Ns={class:"floor-layout"},Ds={class:"building-structure"},Fs=["onClick"],Is={class:"marker-content"},Ks={class:"marker-number"},Es={class:"marker-popup"},Gs={class:"popup-content"},Os={class:"floor-navigation"},Us=["onClick"],qs={class:"modal-header"},As={class:"modal-title"},Xs={class:"room-number-badge"},Js={class:"modal-content"},Qs={class:"modal-left"},Ws={class:"room-image"},Zs=["src","alt"],js={class:"image-overlay"},Ys={key:0,class:"room-gallery"},st=["src","alt"],tt={class:"modal-right"},et={class:"room-details"},at={class:"detail-section"},lt={class:"detail-grid"},ot={class:"detail-item"},nt={class:"detail-value"},it={class:"detail-item"},dt={class:"detail-value"},vt={class:"detail-item"},ct={class:"detail-value"},ut={class:"detail-item"},rt={class:"detail-value"},pt={class:"detail-section"},ht={class:"amenities-list"},gt={class:"detail-section"},mt={class:"price-info"},_t={class:"price-main"},yt={class:"price-amount"},ft={class:"modal-actions"},kt={class:"toast-content"},wt={key:0,viewBox:"0 0 24 24",class:"toast-icon"},zt={key:1,viewBox:"0 0 24 24",class:"toast-icon"},xt={__name:"RoomMap",setup(Ct){const d=c(null),x=c([]),_=c([]),y=c(!1),C=c(""),h=c(""),g=c(""),f=c("grid"),b=c(1),k=c([]),L=c(!1),F=c(""),H=c("success"),{$api:U}=j(),I=G(()=>h.value?[parseInt(h.value)]:_.value),q=G(()=>x.value.filter(a=>{const t=a.maPhong.toLowerCase().includes(C.value.toLowerCase())||a.loaiPhong.toLowerCase().includes(C.value.toLowerCase()),e=!h.value||a.tang===parseInt(h.value),l=!g.value||a.typeClass===g.value;return t&&e&&l})),M=(a,t="success")=>{F.value=a,H.value=t,L.value=!0,setTimeout(()=>{L.value=!1},3e3)},R=a=>new Intl.NumberFormat("vi-VN").format(a),w=a=>q.value.filter(t=>t.tang===a),V=a=>x.value.filter(t=>t.typeClass===a).length,A=a=>{const t=["available","occupied","maintenance"];return t[Math.floor(Math.random()*t.length)]},X=(a,t,e)=>{const l=Math.ceil(Math.sqrt(e)),z=Math.floor(t/l);return{left:`${t%l*120+50}px`,top:`${z*100+50}px`}},K=a=>{const t={standard:"https://images.unsplash.com/photo-1566073771259-6a8506099945",deluxe:"https://images.unsplash.com/photo-1582719478250-c89cae4dc85b",suite:"https://images.unsplash.com/photo-1590490360182-c33d57733427",dorm:"https://images.unsplash.com/photo-1555854877-bab0e564b8d5"};return t[a]||t.standard},J=a=>{a.target.src=K("standard")},E=a=>{d.value=a,M(`Đã chọn phòng ${a.maPhong}`)},N=()=>{d.value=null},Q=a=>{M(`Chuyển hướng đến trang đặt phòng ${a.maPhong}...`),setTimeout(()=>{window.location.href=`/booking?room=${a.maPhong}`},1e3)},P=a=>{g.value=g.value===a?"":a},W=a=>{const t=k.value.indexOf(a);t>-1?k.value.splice(t,1):k.value.push(a)},Z=()=>{M("Đã đặt lại zoom")};return Y(async()=>{try{const a=await U.get("http://nhom2webkhachsan.runasp.net/api/PhongWithTienNghi");x.value=a.data.map(t=>({...t,tienNghiList:JSON.parse(t.tienNghi||"[]"),shortType:t.loaiPhong.replace(" Room",""),typeClass:t.loaiPhong.includes("Standard")?"standard":t.loaiPhong.includes("Deluxe")?"deluxe":t.loaiPhong.includes("Suite")?"suite":"dorm"})),_.value=[...new Set(x.value.map(t=>t.tang))].sort((t,e)=>t-e),b.value=_.value[0]||1,setTimeout(()=>{y.value=!0},100)}catch(a){console.error("Lỗi khi lấy dữ liệu phòng:",a),M("Không thể tải dữ liệu phòng","error")}}),(a,t)=>(n(),o("div",ls,[t[46]||(t[46]=s("div",{class:"background-animation"},[s("div",{class:"floating-shape shape-1"}),s("div",{class:"floating-shape shape-2"}),s("div",{class:"floating-shape shape-3"})],-1)),s("div",{class:v(["map-header",{"animate-in":y.value}])},t[10]||(t[10]=[D('<div class="header-content" data-v-8af0c52e><div class="header-icon" data-v-8af0c52e><svg viewBox="0 0 24 24" class="icon-svg" data-v-8af0c52e><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z" data-v-8af0c52e></path></svg></div><h1 class="page-title" data-v-8af0c52e><span class="title-line" data-v-8af0c52e>Sơ đồ phòng</span><span class="title-highlight" data-v-8af0c52e>OceanView Hotels</span></h1><p class="page-subtitle" data-v-8af0c52e>Khám phá bố cục và vị trí các phòng trong khách sạn của chúng tôi</p></div>',1)]),2),s("div",{class:v(["controls-section",{"animate-in":y.value}])},[s("div",os,[s("div",ns,[s("div",is,[t[11]||(t[11]=s("svg",{viewBox:"0 0 24 24",class:"search-icon"},[s("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})],-1)),S(s("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>C.value=e),placeholder:"Tìm kiếm phòng...",class:"search-input"},null,512),[[ss,C.value]])]),s("div",ds,[S(s("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>h.value=e),class:"floor-select"},[t[12]||(t[12]=s("option",{value:""},"Tất cả tầng",-1)),(n(!0),o(u,null,r(_.value,e=>(n(),o("option",{key:e,value:e}," Tầng "+i(e),9,vs))),128))],512),[[O,h.value]])]),s("div",cs,[S(s("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>g.value=e),class:"type-select"},t[13]||(t[13]=[D('<option value="" data-v-8af0c52e>Tất cả loại phòng</option><option value="standard" data-v-8af0c52e>Standard</option><option value="deluxe" data-v-8af0c52e>Deluxe</option><option value="suite" data-v-8af0c52e>Suite</option><option value="dorm" data-v-8af0c52e>Dorm</option>',5)]),512),[[O,g.value]])])]),s("div",us,[s("div",rs,[s("button",{class:v(["view-btn",{active:f.value==="grid"}]),onClick:t[3]||(t[3]=e=>f.value="grid"),title:"Xem dạng lưới"},t[14]||(t[14]=[s("svg",{viewBox:"0 0 24 24"},[s("path",{d:"M3 11h8V3H3v8zm2-6h4v4H5V5zm8-2v8h8V3h-8zm6 6h-4V5h4v4zM3 21h8v-8H3v8zm2-6h4v4H5v-4zm8-2h8v8h-8v-8zm2 2h4v4h-4v-4z"})],-1)]),2),s("button",{class:v(["view-btn",{active:f.value==="map"}]),onClick:t[4]||(t[4]=e=>f.value="map"),title:"Xem dạng bản đồ"},t[15]||(t[15]=[s("svg",{viewBox:"0 0 24 24"},[s("path",{d:"M20.5 3l-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM10 5.47l4 1.4v11.66l-4-1.4V5.47zm-5 .99l3-1.01v11.7l-3 1.16V6.46zm14 11.08l-3 1.01V6.86l3-1.16v11.84z"})],-1)]),2)]),s("button",{class:"zoom-btn",onClick:Z,title:"Đặt lại zoom"},t[16]||(t[16]=[s("svg",{viewBox:"0 0 24 24"},[s("path",{d:"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"})],-1)]))])])],2),s("div",{class:v(["legend-section",{"animate-in":y.value}])},[s("div",ps,[t[25]||(t[25]=s("h3",{class:"legend-title"},[s("svg",{viewBox:"0 0 24 24",class:"legend-icon"},[s("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})]),p(" Chú thích ")],-1)),s("div",hs,[s("div",{class:"legend-item standard",onClick:t[5]||(t[5]=e=>P("standard"))},[t[17]||(t[17]=s("div",{class:"legend-color"},null,-1)),t[18]||(t[18]=s("span",{class:"legend-text"},"Standard Room",-1)),s("span",gs,"("+i(V("standard"))+")",1)]),s("div",{class:"legend-item deluxe",onClick:t[6]||(t[6]=e=>P("deluxe"))},[t[19]||(t[19]=s("div",{class:"legend-color"},null,-1)),t[20]||(t[20]=s("span",{class:"legend-text"},"Deluxe Room",-1)),s("span",ms,"("+i(V("deluxe"))+")",1)]),s("div",{class:"legend-item suite",onClick:t[7]||(t[7]=e=>P("suite"))},[t[21]||(t[21]=s("div",{class:"legend-color"},null,-1)),t[22]||(t[22]=s("span",{class:"legend-text"},"Suite Room",-1)),s("span",_s,"("+i(V("suite"))+")",1)]),s("div",{class:"legend-item dorm",onClick:t[8]||(t[8]=e=>P("dorm"))},[t[23]||(t[23]=s("div",{class:"legend-color"},null,-1)),t[24]||(t[24]=s("span",{class:"legend-text"},"Dorm Room",-1)),s("span",ys,"("+i(V("dorm"))+")",1)])])])],2),s("div",fs,[f.value==="grid"?(n(),o("div",ks,[(n(!0),o(u,null,r(I.value,e=>(n(),o("div",{key:e,class:v(["floor-section",{"animate-in":y.value}]),style:$({animationDelay:`${e*.1}s`})},[s("div",ws,[s("div",zs,[s("h3",xs,[t[26]||(t[26]=s("svg",{viewBox:"0 0 24 24",class:"floor-icon"},[s("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 3c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6zm7 13H5v-.23c0-.62.28-1.2.76-1.58C7.47 15.82 9.64 15 12 15s4.53.82 6.24 2.19c.48.38.76.97.76 1.58V19z"})],-1)),p(" Tầng "+i(e),1)]),s("span",Cs,i(w(e).length)+" phòng",1)]),s("button",{class:v(["collapse-btn",{collapsed:k.value.includes(e)}]),onClick:l=>W(e)},t[27]||(t[27]=[s("svg",{viewBox:"0 0 24 24"},[s("path",{d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})],-1)]),10,bs)]),S(s("div",{class:"floor-grid",style:$({"--room-count":w(e).length})},[(n(!0),o(u,null,r(w(e),(l,z)=>{var m;return n(),o("div",{key:l.maPhong,class:v(["room-card",[l.typeClass,{selected:((m=d.value)==null?void 0:m.maPhong)===l.maPhong}]]),onClick:B=>E(l),style:$({animationDelay:`${z*.05}s`})},[s("div",Ms,[s("span",Vs,i(l.maPhong),1),s("div",{class:v(["room-status",A()])},t[28]||(t[28]=[s("svg",{viewBox:"0 0 24 24",class:"status-icon"},[s("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})],-1)]),2)]),s("div",Ps,[s("span",Bs,i(l.shortType),1),s("span",Ts,i(R(l.giaPhong)),1)]),s("div",Ss,[(n(!0),o(u,null,r(l.tienNghiList.slice(0,2),B=>(n(),o("div",{class:"feature-item",key:B},[t[29]||(t[29]=s("svg",{viewBox:"0 0 24 24",class:"feature-icon"},[s("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})],-1)),s("span",null,i(B),1)]))),128)),l.tienNghiList.length>2?(n(),o("span",$s," +"+i(l.tienNghiList.length-2)+" tiện nghi khác ",1)):T("",!0)])],14,Ls)}),128))],4),[[es,!k.value.includes(e)]])],6))),128))])):(n(),o("div",Hs,[s("div",Rs,[(n(!0),o(u,null,r(I.value,e=>(n(),o("div",{key:e,class:v(["floor-map",{active:b.value===e}])},[s("div",Ns,[s("div",Ds,[t[30]||(t[30]=D('<div class="elevator" data-v-8af0c52e><svg viewBox="0 0 24 24" class="elevator-icon" data-v-8af0c52e><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM8 6h2v5H8V6zm6 12h-4v-5h4v5zm0-7h-4V6h4v5z" data-v-8af0c52e></path></svg><span data-v-8af0c52e>Thang máy</span></div><div class="stairs" data-v-8af0c52e><svg viewBox="0 0 24 24" class="stairs-icon" data-v-8af0c52e><path d="M22 3H7c-.69 0-1.23.35-1.59.88L0 12l5.41 8.11c.36.53.97.89 1.66.89H22c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z" data-v-8af0c52e></path></svg><span data-v-8af0c52e>Cầu thang</span></div>',2)),(n(!0),o(u,null,r(w(e),(l,z)=>{var m;return n(),o("div",{key:l.maPhong,class:v(["room-marker",[l.typeClass,{selected:((m=d.value)==null?void 0:m.maPhong)===l.maPhong}]]),style:$(X(l,z,w(e).length)),onClick:B=>E(l)},[s("div",Is,[s("span",Ks,i(l.maPhong),1),s("div",Es,[s("div",Gs,[s("h4",null,i(l.loaiPhong),1),s("p",null,i(R(l.giaPhong))+"/đêm",1)])])])],14,Fs)}),128))])])],2))),128)),s("div",Os,[(n(!0),o(u,null,r(_.value,e=>(n(),o("button",{key:e,class:v(["floor-nav-btn",{active:b.value===e}]),onClick:l=>b.value=e},i(e),11,Us))),128))])],512)]))]),d.value?(n(),o("div",{key:0,class:"modal-overlay",onClick:ts(N,["self"])},[s("div",{class:v(["modal-container",{"animate-in":d.value}])},[s("div",qs,[s("div",As,[s("h2",null,i(d.value.loaiPhong),1),s("span",Xs,"Phòng "+i(d.value.maPhong),1)]),s("button",{class:"close-btn",onClick:N},t[31]||(t[31]=[s("svg",{viewBox:"0 0 24 24"},[s("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)]))]),s("div",Js,[s("div",Qs,[s("div",Ws,[s("img",{src:d.value.urlAnhChinh||K(d.value.typeClass),alt:d.value.loaiPhong,onError:J},null,40,Zs),s("div",js,[s("div",{class:v(["room-type-badge",d.value.typeClass])},i(d.value.loaiPhong),3)])]),d.value.gallery?(n(),o("div",Ys,[(n(!0),o(u,null,r(d.value.gallery,(e,l)=>(n(),o("div",{class:"gallery-item",key:l},[s("img",{src:e,alt:`Room ${d.value.maPhong} - ${l+1}`},null,8,st)]))),128))])):T("",!0)]),s("div",tt,[s("div",et,[s("div",at,[t[36]||(t[36]=s("h3",null,[s("svg",{viewBox:"0 0 24 24",class:"section-icon"},[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})]),p(" Thông tin cơ bản ")],-1)),s("div",lt,[s("div",ot,[t[32]||(t[32]=s("span",{class:"detail-label"},"Loại giường:",-1)),s("span",nt,i(d.value.kieuGiuong||"Không xác định"),1)]),s("div",it,[t[33]||(t[33]=s("span",{class:"detail-label"},"Tầng:",-1)),s("span",dt,i(d.value.tang),1)]),s("div",vt,[t[34]||(t[34]=s("span",{class:"detail-label"},"View:",-1)),s("span",ct,i(d.value.view||"Không xác định"),1)]),s("div",ut,[t[35]||(t[35]=s("span",{class:"detail-label"},"Diện tích:",-1)),s("span",rt,i(d.value.dienTich||"Không xác định")+" m²",1)])])]),s("div",pt,[t[38]||(t[38]=s("h3",null,[s("svg",{viewBox:"0 0 24 24",class:"section-icon"},[s("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})]),p(" Tiện nghi ")],-1)),s("div",ht,[(n(!0),o(u,null,r(d.value.tienNghiList,e=>(n(),o("div",{class:"amenity-item",key:e},[t[37]||(t[37]=s("svg",{viewBox:"0 0 24 24",class:"amenity-icon"},[s("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})],-1)),s("span",null,i(e),1)]))),128))])]),s("div",gt,[t[41]||(t[41]=s("h3",null,[s("svg",{viewBox:"0 0 24 24",class:"section-icon"},[s("path",{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"})]),p(" Giá phòng ")],-1)),s("div",mt,[s("div",_t,[s("span",yt,i(R(d.value.giaPhong)),1),t[39]||(t[39]=s("span",{class:"price-unit"},"VNĐ / đêm",-1))]),t[40]||(t[40]=s("div",{class:"price-note"},"* Giá đã bao gồm thuế và phí dịch vụ",-1))])])]),s("div",ft,[s("button",{class:"action-btn secondary",onClick:N},t[42]||(t[42]=[s("svg",{viewBox:"0 0 24 24"},[s("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1),p(" Đóng ")])),s("button",{class:"action-btn primary",onClick:t[9]||(t[9]=e=>Q(d.value))},t[43]||(t[43]=[s("svg",{viewBox:"0 0 24 24"},[s("path",{d:"M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"})],-1),p(" Đặt phòng ngay ")]))])])])],2)])):T("",!0),L.value?(n(),o("div",{key:1,class:v(["toast",[H.value,{show:L.value}]])},[s("div",kt,[H.value==="success"?(n(),o("svg",wt,t[44]||(t[44]=[s("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"},null,-1)]))):(n(),o("svg",zt,t[45]||(t[45]=[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"},null,-1)]))),s("span",null,i(F.value),1)])],2)):T("",!0)]))}},Mt=as(xt,[["__scopeId","data-v-8af0c52e"]]);export{Mt as default};
