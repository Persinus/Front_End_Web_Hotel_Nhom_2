import{_ as P}from"./CsSGlVYz.js";import{h as r,l as E,P as U,k as y,c as w,o as v,a as e,b as t,S as C,w as l,i as $,z as N,T as A,j as I,O as R,H as j,r as F,n as M,F as K,f as Q,t as h,g as Y,d as S,x as q,m as G}from"./XxkKQ-J5.js";import{u as J}from"./D5qk9RRY.js";import{_ as z}from"./DlAUqK2U.js";const W={__name:"DropDown",props:{offset:{type:Number,default:0},placement:{type:String,default:"bottom-end"}},setup(x){const a=x,m=r(!1),p=r(null);function k(o){m.value=!m.value}function g(o){p.value&&!p.value.contains(o.target)&&(m.value=!1)}E(()=>{document.addEventListener("click",g)}),U(()=>{document.removeEventListener("click",g)});const b=y(()=>{let o=`margin-top:${a.offset}px;`;return a.placement.includes("top")?o=`bottom:100%;${a.placement.includes("end")?"right:0;":"left:0;"}margin-bottom:${a.offset}px;`:o+=a.placement.includes("end")?"right:0;":"left:0;",o});return(o,s)=>(v(),w("div",{class:"dropdown-wrapper",ref_key:"wrapper",ref:p},[e("div",{onClick:k},[C(o.$slots,"anchor",{},void 0,!0)]),t(A,{name:"fade"},{default:l(()=>[m.value?(v(),w("div",{key:0,class:"dropdown-content",style:N(b.value)},[C(o.$slots,"default",{},void 0,!0)],4)):$("",!0)]),_:3})],512))}},X=z(W,[["__scopeId","data-v-8d3eba3b"]]),Z={class:"container"},ee={class:"nav-list"},ne={class:"header-actions"},te=["title"],se={class:"auth-section"},oe={class:"user-avatar"},le={class:"avatar-container"},ae=["src"],ie={class:"user-info"},ce={class:"username"},de={class:"user-role"},re={class:"dropdown-content"},ue={class:"user-profile-section"},me={class:"profile-header"},pe=["src"],ve={class:"dropdown-menu-items"},ge={key:1,class:"auth-buttons"},_e={__name:"Header",setup(x){const a=I(),m=[{title:"Trang chủ",link:"/",icon:"home"},{title:"Đặt phòng",link:"/Phong",icon:"hotel"},{title:"Dịch vụ",link:"/DichVu",icon:"room_service"},{title:"Nội quy",link:"/HotelRegulations",icon:"rule"}],p=r(!1),k=r(!1),g=r(0);r(!1),r(3),r([{id:1,message:"Đặt phòng của bạn đã được xác nhận",time:"5 phút trước"},{id:2,message:"Ưu đãi đặc biệt: Giảm 20% cho lần đặt tiếp theo",time:"1 giờ trước"},{id:3,message:"Check-in sớm đã được chấp thuận",time:"2 giờ trước"}]);const b=J(),o=y(()=>b.isLoggedIn()),s=r(null),D=y({get:()=>a.isDarkMode,set:u=>a.setDarkMode(u)}),V=()=>{p.value=!1},B=()=>{b.logout(),s.value=null,window.location.href="/"},T=()=>{const u=window.pageYOffset||document.documentElement.scrollTop;k.value=u>50;const n=document.body.scrollTop||document.documentElement.scrollTop,i=document.documentElement.scrollHeight-document.documentElement.clientHeight;g.value=n/i*100},L=async()=>{try{const u=await G.get("/xacthuc/profile");s.value=u.data.profile}catch{s.value=null}};function O(){a.toggleDarkMode()}return E(()=>{o.value&&L(),window.addEventListener("scroll",T)}),R(()=>{window.removeEventListener("scroll",T)}),j(o,u=>{u?L():s.value=null}),(u,n)=>{const i=P,c=F("va-icon");return v(),w("header",{class:M(["header",{dark:q(a).isDarkMode,scrolled:k.value}])},[e("div",Z,[t(i,{class:"logo",to:"/"},{default:l(()=>n[0]||(n[0]=[e("div",{class:"logo-icon"},[e("svg",{viewBox:"0 0 24 24",class:"logo-svg"},[e("path",{d:"M12 2L2 7v10c0 5.55 3.84 10 9 11 1.16.21 2.76.21 3.91 0 5.16-1 9-5.45 9-11V7l-10-5z"}),e("path",{d:"M12 7v5l4 2-4 2v5"})])],-1),e("div",{class:"logo-text"},[e("span",{class:"brand-name"},"OceanView"),e("span",{class:"brand-tagline"},"Luxury Hotels")],-1)])),_:1,__:[0]}),e("nav",{class:M(["nav",{"nav-open":p.value}])},[e("ul",ee,[(v(),w(K,null,Q(m,d=>e("li",{key:d.title,class:"nav-item"},[t(i,{class:"nav-link",to:d.link,"active-class":"active","exact-active-class":"active",onClick:V},{default:l(()=>[t(c,{name:d.icon,size:"small",class:"nav-icon"},null,8,["name"]),e("span",null,h(d.title),1)]),_:2},1032,["to"])])),64))])],2),e("div",ne,[e("button",{class:"theme-toggle",onClick:O,title:D.value?"Chuyển sang Light Mode":"Chuyển sang Dark Mode"},[t(c,{name:D.value?"light_mode":"dark_mode"},null,8,["name"])],8,te),e("div",se,[o.value?(v(),Y(X,{key:0,placement:"bottom-end",class:"user-dropdown"},{anchor:l(()=>{var d,_,f,H;return[e("div",oe,[e("div",le,[e("img",{src:(d=s.value)!=null&&d.HinhAnhURL&&s.value.HinhAnhURL!=="string"?s.value.HinhAnhURL:"https://i.pinimg.com/736x/cd/62/46/cd624642b71af4a1d73f69b1290c751a.jpg",alt:"Avatar",class:"avatar"},null,8,ae),n[1]||(n[1]=e("div",{class:"status-indicator online"},null,-1))]),e("div",ie,[e("span",ce,h(((_=s.value)==null?void 0:_.HoTen)||((f=s.value)==null?void 0:f.TenTaiKhoan)||"Người dùng"),1),e("span",de,h((H=s.value)==null?void 0:H.Vaitro),1)]),t(c,{name:"expand_more",size:"small",class:"dropdown-arrow"})])]}),default:l(()=>{var d,_,f;return[e("div",re,[e("div",ue,[e("div",me,[e("img",{src:((d=s.value)==null?void 0:d.HinhAnhURL)||"https://i.pinimg.com/736x/cd/62/46/cd624642b71af4a1d73f69b1290c751a.jpg",class:"profile-avatar"},null,8,pe),e("div",null,[e("h4",null,h(((_=s.value)==null?void 0:_.HoTen)||"Người dùng"),1),e("p",null,h((f=s.value)==null?void 0:f.Email),1)])])]),n[7]||(n[7]=e("div",{class:"dropdown-divider"},null,-1)),e("div",ve,[t(i,{to:"/profile",class:"dropdown-item"},{default:l(()=>[t(c,{name:"person"}),n[2]||(n[2]=e("span",null,"Hồ sơ cá nhân",-1))]),_:1,__:[2]}),t(i,{to:"/bookings",class:"dropdown-item"},{default:l(()=>[t(c,{name:"hotel"}),n[3]||(n[3]=e("span",null,"Đặt phòng của tôi",-1))]),_:1,__:[3]}),t(i,{to:"/favorites",class:"dropdown-item"},{default:l(()=>[t(c,{name:"favorite"}),n[4]||(n[4]=e("span",null,"Yêu thích",-1))]),_:1,__:[4]}),t(i,{to:"/settings",class:"dropdown-item"},{default:l(()=>[t(c,{name:"settings"}),n[5]||(n[5]=e("span",null,"Cài đặt",-1))]),_:1,__:[5]})]),n[8]||(n[8]=e("div",{class:"dropdown-divider"},null,-1)),e("div",{class:"dropdown-item logout-item",onClick:B},[t(c,{name:"logout"}),n[6]||(n[6]=e("span",null,"Đăng xuất",-1))])])]}),_:1})):(v(),w("div",ge,[t(i,{to:"/DangNhap",class:"btn btn-outline"},{default:l(()=>[t(c,{name:"login",size:"small"}),n[9]||(n[9]=S(" Đăng nhập "))]),_:1,__:[9]}),t(i,{to:"/DangKy",class:"btn btn-primary"},{default:l(()=>[t(c,{name:"person_add",size:"small"}),n[10]||(n[10]=S(" Đăng ký "))]),_:1,__:[10]})]))])])]),e("div",{class:"scroll-progress",style:N({width:g.value+"%"})},null,4)],2)}}},be=z(_e,[["__scopeId","data-v-4693b538"]]);export{be as T};
