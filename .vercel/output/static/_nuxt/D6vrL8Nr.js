import{k as v,c as l,o as n,F as V,f as w,a as t,b as p,d as y,r as P,i as _,t as s,g as S,n as N,w as T,x as A,G as R,h as b,l as z,H as D,m as L}from"./uS3GKcKi.js";import{_ as C}from"./DlAUqK2U.js";import{T as j}from"./Bt5HLXbi.js";import"./BliCIpEm.js";import"./B-_5bKbQ.js";const U={class:"hotels-grid"},H={class:"hotel-image-container"},I=["src","alt"],G={class:"hotel-badge"},E={class:"special-badges"},q={key:0,class:"special-badge",style:{background:"#a78bfa",color:"white"}},F={key:1,class:"special-badge",style:{background:"#22c55e",color:"white"}},O={key:2,class:"special-badge",style:{background:"#ef4444",color:"white"}},X={key:3,class:"special-badge",style:{background:"#f59e42",color:"white"}},J={key:4,class:"special-badge",style:{background:"#ef4444",color:"white"}},K={class:"overlay-content"},Q={style:{"font-size":"1.3rem","font-weight":"700"}},W={class:"hotel-content"},Y={class:"hotel-header"},Z={class:"hotel-title"},ee={class:"hotel-rating"},te={class:"stars"},ae={class:"rating-text"},se={class:"hotel-info"},ne={class:"info-item"},oe={class:"info-item"},ie={class:"hotel-footer"},le={class:"price-group"},ce={key:0,class:"price"},de={class:"old-price"},re={class:"discount-price"},ue={key:1,class:"price"},ge={class:"price-unit"},he=["src"],pe={class:"overlay-content"},me={__name:"CardRooms",props:{rooms:{type:Array,required:!0},maxPrice:Number,minPrice:Number,maxRating:Number},setup(r){const u=r;function c(o){return o?o.toLocaleString("vi-VN")+"₫":""}const m=v(()=>[...u.rooms].sort((o,a)=>o.maPhong.localeCompare(a.maPhong))),g=o=>{isActive.value=o;const a=pixelGrid.value.querySelectorAll(".pixel");a.forEach((d,f)=>{setTimeout(()=>{d.style.opacity=isActive.value?"1":"0"},f*u.animationStepDuration*1e3/a.length)}),setTimeout(()=>{activeContent.value.style.display=isActive.value?"block":"none"},u.animationStepDuration*1e3)};return(o,a)=>{const d=P("va-icon"),f=P("va-button"),x=P("PixelatedImageCard");return n(),l("div",U,[(n(!0),l(V,null,w(A(m),e=>(n(),l("div",{class:"hotel-card",key:e.maPhong},[t("div",H,[t("img",{src:e.urlAnhChinh||"https://i.pinimg.com/736x/5c/f2/cd/5cf2cd74c675ddbd78c0defbce34a63d.jpg",class:"hotel-img",alt:e.loaiPhong||"Phòng khách sạn"},null,8,I),t("div",G,[p(d,{name:"verified",size:"small"}),a[2]||(a[2]=y(" Đã xác minh "))]),t("div",E,[e.soSaoTrungBinh===r.maxRating?(n(),l("div",q," Best ")):_("",!0),e.giaPhong===r.minPrice?(n(),l("div",F," Low ")):_("",!0),e.giaPhong===r.maxPrice?(n(),l("div",O," High ")):_("",!0),e.isNew?(n(),l("div",X," Mới ")):_("",!0),e.isHot?(n(),l("div",J," Hot ")):_("",!0)]),t("div",K,[t("div",Q," Mã phòng: "+s(e.maPhong),1)])]),t("div",W,[t("div",Y,[t("h3",Z,s(e.loaiPhong),1),t("div",ee,[t("div",te,[(n(!0),l(V,null,w(Math.round(e.soSaoTrungBinh||0),h=>(n(),S(d,{name:"star",color:"warning",key:h,size:"small"}))),128))]),t("span",ae,s(e.soSaoTrungBinh||0),1)])]),t("div",se,[t("span",ne,"Tầng: "+s(e.tang),1),t("span",oe,[a[3]||(a[3]=y(" Tình trạng: ")),t("span",{class:N(e.tinhTrang==="1"?"status-available":"status-unavailable")},[p(d,{name:e.tinhTrang==="1"?"check_circle":"block",color:e.tinhTrang==="1"?"success":"danger"},null,8,["name","color"]),y(" "+s(e.tinhTrang==="1"?"Còn trống":"Đã được đặt"),1)],2)])]),t("div",ie,[t("div",le,[e.giaUuDai&&e.giaUuDai<e.giaPhong?(n(),l("span",ce,[t("span",de,s(c(e.giaPhong)),1),t("span",re,s(c(e.giaUuDai)),1)])):(n(),l("span",ue,s(c(e.giaPhong)),1)),t("span",ge,"/ "+s(e.donViTinh||"đêm"),1)]),p(f,{color:"primary",size:"medium",class:"book-btn",onClick:h=>o.$emit("book-room",e)},{default:T(()=>a[4]||(a[4]=[y(" Xem chi tiết ")])),_:2,__:[4]},1032,["onClick"])])]),t("div",{class:"pixelated-image-card",style:{position:"relative",overflow:"hidden"},onMouseenter:a[0]||(a[0]=h=>g(!0)),onMouseleave:a[1]||(a[1]=h=>g(!1))},[p(x,{"first-content":e,"second-content":e,"grid-size":10,"pixel-color":"#000","animation-step-duration":.2,"aspect-ratio":"75%"},{firstContent:T(()=>[t("img",{src:e.urlAnhChinh,style:{width:"100%",height:"200px","object-fit":"cover"}},null,8,he),t("div",null,s(e.loaiPhong),1)]),secondContent:T(()=>[t("div",pe,[t("div",null,"Mã phòng: "+s(e.maPhong),1),t("div",null,"Loại phòng: "+s(e.loaiPhong),1),t("div",null,"Giá: "+s(e.giaPhong.toLocaleString("vi-VN"))+"₫",1),t("div",null,"Giá ưu đãi: "+s(e.giaUuDai.toLocaleString("vi-VN"))+"₫",1),t("div",null,"Tầng: "+s(e.tang),1),t("div",null,"Tình trạng: "+s(e.tinhTrang==="1"?"Còn trống":"Đã đặt"),1),t("div",null,"Đơn vị: "+s(e.donViTinh),1),t("div",null,"Sao: "+s(e.soSaoTrungBinh),1)])]),_:2},1032,["first-content","second-content"])],32)]))),128))])}}},ve=C(me,[["__scopeId","data-v-85cf68c7"]]),_e={props:{totalPages:{type:Number,default:15},modelValue:{type:Number,default:1}},emits:["update:modelValue"],computed:{value:{get(){return this.modelValue},set(r){this.$emit("update:modelValue",r)}}}};function fe(r,u,c,m,g,o){const a=P("VaPagination");return n(),S(a,{modelValue:o.value,"onUpdate:modelValue":u[0]||(u[0]=d=>o.value=d),pages:c.totalPages,"visible-pages":4,class:"justify-center sm:justify-start"},null,8,["modelValue","pages"])}const be=C(_e,[["render",fe]]),ke={class:"page-container"},ye={key:0,class:"modal-loading"},Pe={key:1,class:"error-message"},xe={key:2},Te=9,Ve={__name:"Phong",setup(r){const u=R(),c=b([]),m=b(!0),g=b(null),o=b(1),a=b(1),d=async()=>{m.value=!0;try{const i=await L.get(`/TatCaTruyCap/phong-rutgon?page=${o.value}&pageSize=${Te}`);c.value=i.data.data||i.data,a.value=3}catch(i){g.value=i.message||"Lỗi khi gọi API"}finally{m.value=!1}};z(d),D(o,d);const f=v(()=>Math.max(...c.value.map(i=>i.soSaoTrungBinh||0))),x=v(()=>Math.max(...c.value.map(i=>i.giaPhong||0))),e=v(()=>Math.min(...c.value.map(i=>i.giaPhong||0))),h=v(()=>Object.fromEntries(c.value.map(i=>[i.maPhong,Math.floor(Math.random()*500)+1]))),$=v(()=>Math.max(...Object.values(h.value)));function B(i){u.push(`/phong/${i.maPhong}`)}return(i,k)=>(n(),l(V,null,[p(j),t("div",ke,[m.value?(n(),l("div",ye,k[1]||(k[1]=[t("div",{class:"modal-loading-backdrop"},null,-1),t("div",{class:"modal-loading-content"},[t("span",{class:"loader"}),t("span",null,"Đang tải dữ liệu...")],-1)]))):_("",!0),g.value?(n(),l("div",Pe,s(g.value),1)):(n(),l("div",xe,[p(ve,{rooms:c.value,"max-rating":f.value,"max-booked":$.value,"max-price":x.value,"min-price":e.value,"booked-map":h.value,onBookRoom:B},null,8,["rooms","max-rating","max-booked","max-price","min-price","booked-map"]),p(be,{modelValue:o.value,"onUpdate:modelValue":k[0]||(k[0]=M=>o.value=M),"total-pages":a.value,class:"mt-6"},null,8,["modelValue","total-pages"])]))])],64))}},Me=C(Ve,[["__scopeId","data-v-8db8a41c"]]);export{Me as default};
